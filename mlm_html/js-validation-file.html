<script>
    function checkReferrerAvailability11(str, url)
    {
        if (isSpclChar(str, 'sponsor') == false)
        {
            document.getElementById('sponsor').focus();
            return false;
        }
        var xmlhttp;
        if (str == "")
        {
            alert("<?=__('Please enter the sponsor name.','binary-mlm-pro')?>");
            document.getElementById('sponsor').focus();
            return false;
        }

        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function()
        {
            if (xmlhttp.status == 200 && xmlhttp.readyState == 4)
            {
                document.getElementById("check_referrer").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET", url + "?action=sponsor&q=" + str, true);
        xmlhttp.send();

    }

    function numeric(x, id)
    {
        //var x = document.sform.phone_no.value;
        if (isNaN(x) || x.indexOf(" ") != -1)
        {
            alert("<?=__('Please enter Number.','binary-mlm-pro')?>" + id + " number.");
            document.getElementById(id).value = '';
            document.getElementById(id).focus();
            return false;
        }
        return true;
    }

    function isSpclChar(char, id)
    {
        var iChars = "~`!@#$%^&*()+=-[]\\\';,. /{}|\":<>?";
        for (var i = 0; i < char.length; i++)
        {
            if (iChars.indexOf(char.charAt(i)) != -1)
            {
                alert("<?=__('Special characters are not allowed in','binary-mlm-pro')?> " + id + ".");
                document.getElementById(id).value = '';
                document.getElementById(id).focus();
                return false;
            }
        }
        return true;
    }

    function checkname(char, id)
    {
        var iChars = "~`!@#$%^&*()+=[]\\\';,./{}|\":<>?";
        for (var i = 0; i < char.length; i++)
        {
            if (iChars.indexOf(char.charAt(i)) != -1)
            {
                alert("<?=__('Special characters are not allowed in','binary-mlm-pro')?> " + id + ".");
                document.getElementById(id).value = '';
                document.getElementById(id).focus();
                return false;
            }
        }
        return true;
    }

    function allowspace(char, id)
    {
        var iChars = "~`!@#$%^&*()+=[]\\\';./{}|\":<>?";
        for (var i = 0; i < char.length; i++)
        {
            if (iChars.indexOf(char.charAt(i)) != -1)
            {
                alert("<?=__('Special characters are not allowed in','binary-mlm-pro')?>" + id + ".");
                document.getElementById(id).value = '';
                document.getElementById(id).focus();
                return false;
            }
        }
        return true;
    }

    function emailValidation()
    {
        //var reg= /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        var x = document.getElementById('email').value;
        //alert(x);
        var atPos = x.indexOf("@");
        var dotPos = x.lastIndexOf(".");
        if (atPos < 1 || dotPos <= atPos + 1 || dotPos + 2 >= x.length)
                //if(reg.test(x)==false)
                {
                    alert("<?=__('Your email address is not valid.','binary-mlm-pro')?>");
                    return false;
                }
        return true;
    }
    function formValidation()
    {
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        var confirm_password = document.getElementById('confirm_password').value;
        var sponsor = document.getElementById('sponsor').value;
        var firstname = document.getElementById('firstname').value;
        var lastname = document.getElementById('lastname').value;
        var email = document.getElementById('email').value;
        var confirm_email = document.getElementById('confirm_email').value;

        if (username == '')
        {
            alert("<?=__('Please enter username.','binary-mlm-pro')?>");
            document.getElementById('username').focus();
            return false;
        }

        if (password == '')
        {
            alert("<?=__('Please enter password.','binary-mlm-pro')?>");
            document.getElementById('password').focus();
            return false;
        }
        if (password.length < 6)
        {
            alert("<?=__('Password length is atleast 6 char.','binary-mlm-pro')?>");
            document.getElementById('password').focus();
            return false;
        }
        if (confirm_password == '')
        {
            alert("<?=__('Please confirm your password.','binary-mlm-pro')?>");
            document.getElementById('confirm_password').focus();
            return false;
        }
        if (password != confirm_password)
        {
            alert("<?=__('Your password does not match please try again.','binary-mlm-pro')?>");
            document.getElementById('confirm_password').focus();
            return false;
        }
        if (email == '')
        {
            alert("<?=__('Please enter your E-mail address.','binary-mlm-pro')?>");
            document.getElementById('email').focus();
            return false;
        }
        if (!emailValidation())
        {
            document.getElementById("email").focus();
            return false;
        }
        if (confirm_email == '')
        {
            alert("<?=__('Please confirm your E-mail address.','binary-mlm-pro')?>");
            document.getElementById('confirm_email').focus();
            return false;
        }
        if (email != confirm_email)
        {
            alert("<?=__('Your E-mail address does not match please try again.','binary-mlm-pro')?>");
            document.getElementById('confirm_email').focus();
            return false;
        }
        
        if (firstname == '')
        {
            alert("<?=__('Please enter your first name.','binary-mlm-pro')?>");
            document.getElementById('firstname').focus();
            return false;
        }
        if (lastname == '')
        {
            alert("<?=__('Please enter your last name.','binary-mlm-pro')?>");
            document.getElementById('lastname').focus();
            return false;
        }
        if (sponsor == '')
        {
            if (!confirm('Are you sure you do not know your Sponsor\'s username? Proceed without a Sponsor?')) { return false;}
        }
       
        
    }

    function adminFormValidation()
    {
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        var confirm_password = document.getElementById('confirm_password').value;
        var firstname = document.getElementById('firstname').value;
        var lastname = document.getElementById('lastname').value;
        var address1 = document.getElementById('address1').value;
        var city = document.getElementById('city').value;
        var state = document.getElementById('state').value;
        var postalcode = document.getElementById('postalcode').value;
        var country = document.getElementById('country').value;
        var email = document.getElementById('email').value;
        var confirm_email = document.getElementById('confirm_email').value;
        var telephone = document.getElementById('telephone').value;
        var dob = document.getElementById('dob').value;
        var epin = document.getElementById('epin').value;


        if (username == '')
        {
            alert("<?=__('Please enter username.','binary-mlm-pro')?>");
            document.getElementById('username').focus();
            return false;
        }
        if (epin == '')
        {
            alert("<?=__('Please Enter the ePin.','binary-mlm-pro')?>");
            document.getElementById('epin').focus();
            return false;
        }
        if (password == '')
        {
            alert("<?=__('Please enter password.','binary-mlm-pro')?>");
            document.getElementById('password').focus();
            return false;
        }
        if (password.length < 6)
        {
            alert("<?=__('Password length is atleast 6 char.','binary-mlm-pro')?>");
            document.getElementById('password').focus();
            return false;
        }
        if (confirm_password == '')
        {
            alert("<?=__('Please confirm your password.','binary-mlm-pro')?>");
            document.getElementById('confirm_password').focus();
            return false;
        }
        if (password != confirm_password)
        {
            alert("<?=__('Your password does not match please try again.','binary-mlm-pro')?>");
            document.getElementById('confirm_password').focus();
            return false;
        }
        if (firstname == '')
        {
            alert("<?=__('Please enter your first name.','binary-mlm-pro')?>");
            document.getElementById('firstname').focus();
            return false;
        }
        if (lastname == '')
        {
            alert("<?=__('Please enter your last name.','binary-mlm-pro')?>");
            document.getElementById('lastname').focus();
            return false;
        }
        if (address1 == '')
        {
            alert("<?=__('Please enter your address.','binary-mlm-pro')?>");
            document.getElementById('address1').focus();
            return false;
        }
        if (city == '')
        {
            alert("<?=__('Please enter your city name.','binary-mlm-pro')?>");
            document.getElementById('city').focus();
            return false;
        }
        if (state == '')
        {
            alert("<?=__('Please enter your state name.','binary-mlm-pro')?>");
            document.getElementById('state').focus();
            return false;
        }
        if (postalcode == '')
        {
            alert("<?=__('Please enter your postal code.','binary-mlm-pro')?>");
            document.getElementById('postalcode').focus();
            return false;
        }
        if (country == '')
        {
            alert("<?=__('Please select your country name.','binary-mlm-pro')?>");
            document.getElementById('country').focus();
            return false;
        }
        if (email == '')
        {
            alert("<?=__('Please enter your E-mail address.','binary-mlm-pro')?>");
            document.getElementById('email').focus();
            return false;
        }
        if (!emailValidation())
        {
            document.getElementById("email").focus();
            return false;
        }
        if (confirm_email == '')
        {
            alert("<?=__('Please confirm your E-mail address.','binary-mlm-pro')?>");
            document.getElementById('confirm_email').focus();
            return false;
        }
        if (email != confirm_email)
        {
            alert("<?=__('Your E-mail address does not match please try again.','binary-mlm-pro')?>");
            document.getElementById('confirm_email').focus();
            return false;
        }
        if (telephone == '')
        {
            alert("<?=__('Please enter your contact number.','binary-mlm-pro')?>");
            document.getElementById('telephone').focus();
            return false;
        }
        if (dob == '')
        {
            alert("<?=__('Please enter your date of birth.','binary-mlm-pro')?>");
            document.getElementById('dob').focus();
            return false;
        }
    }

    function updateFormValidation()
    {
        var firstname = document.getElementById('firstname').value;
        var lastname = document.getElementById('lastname').value;
        var address1 = document.getElementById('address1').value;
        var city = document.getElementById('city').value;
        var state = document.getElementById('state').value;
        var postalcode = document.getElementById('postalcode').value;
        var country = document.getElementById('country').value;
        var telephone = document.getElementById('telephone').value;
        var dob = document.getElementById('dob').value;

        if (firstname == '')
        {
            alert("<?=__('Please enter your first name.','binary-mlm-pro')?>");
            document.getElementById('firstname').focus();
            return false;
        }
        if (lastname == '')
        {
            alert("<?=__('Please enter your last name.','binary-mlm-pro')?>");
            document.getElementById('lastname').focus();
            return false;
        }
        if (address1 == '')
        {
            alert("<?=__('Please enter your address.','binary-mlm-pro')?>");
            document.getElementById('address1').focus();
            return false;
        }
        if (city == '')
        {
            alert("<?=__('Please enter your city name.','binary-mlm-pro')?>");
            document.getElementById('city').focus();
            return false;
        }
        if (state == '')
        {
            alert("<?=__('Please enter your state name.','binary-mlm-pro')?>");
            document.getElementById('state').focus();
            return false;
        }
        if (postalcode == '')
        {
            alert("<?=__('Please enter your postal code.','binary-mlm-pro')?>");
            document.getElementById('postalcode').focus();
            return false;
        }
        if (country == '')
        {
            alert("<?=__('Please select your country name.','binary-mlm-pro')?>");
            document.getElementById('country').focus();
            return false;
        }
        if (telephone == '')
        {
            alert("<?=__('Please enter your contact number.','binary-mlm-pro')?>");
            document.getElementById('telephone').focus();
            return false;
        }
        if (dob == '')
        {
            alert("<?=__('Please enter your date of birth.','binary-mlm-pro')?>");
            document.getElementById('dob').focus();
            return false;
        }
    }

    function updatePassword()
    {
        var password = document.getElementById('password').value;
        var confirm_password = document.getElementById('confirm_password').value;

        if (password == '')
        {
            alert("<?=__('Please enter your new password.','binary-mlm-pro')?>");
            document.getElementById('password').focus();
            return false;
        }
        if (password.length < 6)
        {
            alert("<?=__('Password length is atleast 6 char.','binary-mlm-pro')?>");
            document.getElementById('password').focus();
            return false;
        }
        if (confirm_password == '')
        {
            alert("<?=__('Please again type your new password.','binary-mlm-pro')?>");
            document.getElementById('confirm_password').focus();
            return false;
        }
        if (password != confirm_password)
        {
            alert("<?=__('Your password does not match please try again.','binary-mlm-pro')?>");
            document.getElementById('confirm_password').focus();
            return false;
        }
    }

    function toggleVisibility(id)
    {
        var e = document.getElementById(id);
        if (e.style.display == 'block')
            e.style.display = 'none';
        else
            e.style.display = 'block';
    }

    function addRow(tableID)
    {

        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);
        var colCount = table.rows[0].cells.length;

        for (var i = 0; i < colCount; i++)
        {
            var newcell = row.insertCell(i);
            newcell.innerHTML = table.rows[0].cells[i].innerHTML;
            //alert(newcell.childNodes);
            switch (newcell.childNodes[0].type)
            {
                case "text":
                    newcell.childNodes[0].value = "";
                    break;
                case "checkbox":
                    newcell.childNodes[0].checked = false;
                    break;
                case "select-one":
                    newcell.childNodes[0].selectedIndex = 0;
                    break;
            }
        }
    }

    function deleteRow(tableID)
    {
        try
        {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
            for (var i = 0; i < rowCount; i++)
            {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if (null != chkbox && true == chkbox.checked)
                {
                    if (rowCount <= 1)
                    {
                        alert("<?=__('Cannot delete all the rows.','binary-mlm-pro')?>");
                        break;
                    }
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }
            }
        }
        catch (e)
        {
            alert(e);
        }
    }

    var ids = new Array('direct_referral', 'right_referral', 'left_referral', 'pair1', 'pair2', 'initial_pair', 'initial_amount', 'further_amount', 'currency', 'bonus_criteria', 'username', 'password', 'confirm_password', 'email', 'confirm_email');
    var values = new Array('', '', '', '', '', '');

    function populateArrays()
    {
        // assign the default values to the items in the values array
        for (var i = 0; i < ids.length; i++)
        {
            var elem = document.getElementById(ids[i]);
            if (elem)
                if (elem.type == 'checkbox' || elem.type == 'radio')
                    values[i] = elem.checked;
                else
                    values[i] = elem.value;
        }
    }



    var needToConfirm = true;

    window.onbeforeunload = confirmExit;
    function confirmExit()
    {
        if (needToConfirm)
        {
            // check to see if any changes to the data entry fields have been made
            for (var i = 0; i < values.length; i++)
            {
                var elem = document.getElementById(ids[i]);
                if (elem)
                    if ((elem.type == 'checkbox' || elem.type == 'radio')
                            && values[i] != elem.checked)
                        return "<?= __('The changes you made will be lost if you navigate away from this page. <br/> Are you sure you want to leave this page','binary-mlm-pro')?>";
                    else if (!(elem.type == 'checkbox' || elem.type == 'radio') &&
                            elem.value != values[i])
                        return "<?= __('The changes you made will be lost if you navigate away from this page.','binary-mlm-pro')?>";
            }

            // no changes - return nothing      
        }
    }
</script>
<script>
    function checkUserNameAvailability(str)
    {
        //alert(url); return true; 

        if (isSpclChar(str, 'username') == false)
        {
            document.getElementById('username').focus();
            return false;
        }
        var xmlhttp;
        if (str == "")
        {
           // alert("<?php _e('Please enter the user name.','binary-mlm-pro')?>");
           // document.getElementById('username').focus();
            //return false;
        }

        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function()
        {
            if (xmlhttp.status == 200 && xmlhttp.readyState == 4)
            {
                document.getElementById("check_user").innerHTML = xmlhttp.responseText;
                //alert(xmlhttp.responseText);
            }
        }

        xmlhttp.open("GET", "<?= plugins_url().'/'.MLM_PLUGIN_NAME.'/ajax/check_username.php'?>" + "?action=username&q=" + str, true);
        xmlhttp.send();
    }


    function checkePinAvailability(str)
    {
        var iChars = "~`!@#$%^&*()+=[]\\\';,- ./{}|\":<>?abcdefghijklmnopqrstuvwxyz";
        for (var i = 0; i < str.length; i++)
        {
            if (iChars.indexOf(str.charAt(i)) != -1)
            {
                alert("<?php _e('Please enter Valid ePin.','binary-mlm-pro')?>");
                document.getElementById('epin').value = '';
                document.getElementById('epin').focus();
                return false;
            }
        }

        var xmlhttp;
        if (str == "")
        {
            alert("<?php _e('Please enter ePin.','binary-mlm-pro')?>");
            document.getElementById('epin').focus();
            return false;
        }

        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function()
        {
            if (xmlhttp.status == 200 && xmlhttp.readyState == 4)
            {
                document.getElementById("check_epin").innerHTML = xmlhttp.responseText;
                //alert(xmlhttp.responseText);
            }
        }

        xmlhttp.open("GET", "<?= plugins_url().'/'.MLM_PLUGIN_NAME.'/ajax/check_epin.php'?>" + "?q=" + str, true);
        xmlhttp.send();
    }



    function checkePinAvailability1(str)
    {
        var iChars = "~`!@#$%^&*()+=[]\\\';,- ./{}|\":<>?abcdefghijklmnopqrstuvwxyz";
        for (var i = 0; i < str.length; i++)
        {
            if (iChars.indexOf(str.charAt(i)) != -1)
            {
                alert("<?php _e('Please enter Valid ePin.','binary-mlm-pro')?>");
                document.getElementById('epin').value = '';
                document.getElementById('epin').focus();
                return false;
            }
        }

        var xmlhttp;
        /*if (str=="")
         {
         alert("Please enter ePin.");
         document.getElementById('epin').focus();
         return false;
         }*/

        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function()
        {
            if (xmlhttp.status == 200 && xmlhttp.readyState == 4)
            {
                document.getElementById("check_epin").innerHTML = xmlhttp.responseText;
                //alert(xmlhttp.responseText);
            }
        }

        xmlhttp.open("GET", "<?= plugins_url().'/'.MLM_PLUGIN_NAME.'/ajax/check_epin.php'?>" + "?q=" + str, true);
        xmlhttp.send();
    }


    function checkReferrerAvailability(str)
    {
        if (isSpclChar(str, 'sponsor') == false)
        {
            document.getElementById('sponsor').focus();
            return false;
        }
        var xmlhttp;
        
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function()
        {
            if (xmlhttp.status == 200 && xmlhttp.readyState == 4)
            {
                document.getElementById("check_referrer").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET", "<?= plugins_url().'/'.MLM_PLUGIN_NAME.'/ajax/check_username.php'?>" + "?action=sponsor&q=" + str, true);
        xmlhttp.send();

    }


    function checkReferrerAvailability12(str)
    {
        if (isSpclChar(str, 'sponsor') == false)
        {
            document.getElementById('sponsor').focus();
            return false;
        }
        var xmlhttp;
        if (str == "")
        {
            alert("<?=__('Are you sure you do not know your Sponsor s username? Proceed without a Sponsor','binary-mlm-pro')?>");

            return true;
        }

        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function()
        {
            if (xmlhttp.status == 200 && xmlhttp.readyState == 4)
            {
                document.getElementById("check_referrer").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET", "<?= plugins_url().'/'.MLM_PLUGIN_NAME.'/ajax/check_sponsername.php'?>" + "?action=sponsor&q=" + str, true);
        xmlhttp.send();

    }

</script>